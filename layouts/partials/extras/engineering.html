<!-- graphviz rendering -->
{{ if  .Params.viz}}
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/viz.js/1.8.2/viz-lite.js"> </script>
    <script type="text/javascript">
    (function(){
        var vizPrefix = "language-viz-";
        Array.prototype.forEach.call(document.querySelectorAll("[class^=" + vizPrefix + "]"), function(x){
            x.style.display = 'none'
            x.parentNode.style.backgroundColor = "transparent"

            var engine;
            x.getAttribute("class").split(" ").forEach(function(cls){
                if (cls.startsWith(vizPrefix)) {
                    engine = cls.substr(vizPrefix.length);
                }
            });
            var image = new DOMParser().parseFromString(Viz(x.innerText, {format:"svg", engine:engine}), "image/svg+xml");
            var imageElement =  image.documentElement;
            imageElement.style.width = "100%";
            x.parentNode.insertBefore(imageElement, x);
        });
    })();
    </script>
{{ end }}


<!-- waveforms rendering -->
{{ if .Params.wave }}
    <!-- getting waveform generation scripts -->
    <script src="https://wavedrom.com/skins/narrow.js" type="text/javascript"></script>
    <script src="https://wavedrom.com/WaveDrom.js" type="text/javascript"></script>

    <script type="text/javascript">
        var wavePrefix = "language-wave";
        
        var index = 0;
        Array.prototype.forEach.call(document.querySelectorAll("[class^=" + wavePrefix + "]"), function(x){
            x.style.display = 'none'
            x.parentNode.style.backgroundColor = "transparent"
            jsonContent = x.innerText;

            node0 = document.createElement('div');
            node0.id = 'WaveDrom_Display_' + index;
            source = JSON.parse(jsonContent);
            x.parentNode.insertBefore(node0, x);

            WaveDrom.RenderWaveForm (index,source,"WaveDrom_Display_");
            index +=1;
        });
    </script>
{{ end }}

<!-- chart.js rendering -->
{{ if .Params.chart }}
    <!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js" type="text/javascript"></script> -->
    <!-- <script type="text/javascript">
        var chartPrefix = "language-chart";
        
        var index = 0;
        Array.prototype.forEach.call(document.querySelectorAll("[class^=" + chartPrefix + "]"), function(x){
            x.style.display = 'none'
            // x.parentNode.style.backgroundColor = "transparent"
            jsonContent = x.innerText;

            //<canvas id="myChart" width="400" height="400"></canvas>
            // node0 = document.createElement('canvas');
            // node0.id = 'myChart' + index;
            // node.style.width="400";
            // node.style.height="400";
            // source = JSON.parse(jsonContent);
            // x.parentNode.insertBefore(node0, x);
            // var ctx = document.getElementById('myChart' + index).getContext('2d');
            // var myChart = new Chart(ctx, source);

            // WaveDrom.RenderWaveForm (index,source,"WaveDrom_Display_");
            index +=1;
        });
    </script> -->
{{ end }}